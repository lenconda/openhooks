#!/usr/bin/env node

var program = require('commander');
var ohServer = require('../modules/server');
var ohAdd = require('../modules/add');
var ohLs = require('../modules/ls');
var ohDel = require('../modules/del');

program
  .version('0.0.1');

program
  .command('server <action>')
  .action(function (action) {
    switch (action) {
      case 'start':
        ohServer.start();
        break;
      case 'stop':
        ohServer.stop();
        break;
      case 'restart':
        ohServer.restart();
        break;
      default:
        console.log('Param error...');
    }
  })

program
  .command('add')
  .option('-d --desc <description>', 'Add description')
  .option('-c --command <cmd>', 'Add command')
  .action(function (options) {
    var id = ohAdd(options.desc, options.command);
    console.log('Added a new path: /hooks/' + id);
  });

program
  .command('ls')
  .action(function () {
    var results = ohLs();
    console.log('Total: ' + results.length);
    console.table(results);
  });

program
  .command('del <index>')
  .action(function (index) {
    ohDel.del(index);
  });

program
  .command('clear')
  .action(function () {
    ohDel.clear();
  })

program.parse(process.argv);
